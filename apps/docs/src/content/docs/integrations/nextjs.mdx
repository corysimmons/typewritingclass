---
title: Next.js
description: Use Typewriting Class with Next.js App Router.
sidebar:
  order: 2
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

## Setup

<Tabs syncKey="pkg">
  <TabItem label="pnpm">
    ```bash
    pnpm add typewritingclass typewritingclass-react typewritingclass-next
    pnpm add -D typewritingclass-compiler
    ```
  </TabItem>
  <TabItem label="bun">
    ```bash
    bun add typewritingclass typewritingclass-react typewritingclass-next
    bun add -d typewritingclass-compiler
    ```
  </TabItem>
  <TabItem label="npm">
    ```bash
    npm install typewritingclass typewritingclass-react typewritingclass-next
    npm install -D typewritingclass-compiler
    ```
  </TabItem>
</Tabs>

## Next.js config

Wrap your config with `withTwc` to enable build-time CSS extraction:

```js
// next.config.mjs
import { withTwc } from 'typewritingclass-next/plugin'

/** @type {import('next').NextConfig} */
const nextConfig = {}

export default withTwc(nextConfig)
```

Options:

| Option | Type | Default | Description |
|---|---|---|---|
| `outputFile` | `string` | `".next/twc.css"` | Path for extracted CSS |
| `strict` | `boolean` | `false` | Error on non-static `cx()` args |

## Root layout

Add `<TWCStyles />` in `<head>` for SSR styles:

```tsx
// app/layout.tsx
import 'typewritingclass/preflight.css'
import { TWCStyles } from 'typewritingclass-next'

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <head>
        <TWCStyles />
      </head>
      <body>{children}</body>
    </html>
  )
}
```

## Server Components

Use `tw` directly -- no hooks, no client boundary. Use `.value` to resolve the chain to a plain string, since React Server Components cannot serialize Proxy objects:

```tsx
import { tw } from 'typewritingclass'

export default function Home() {
  return (
    <div className={tw.flex.flexCol.gap(8).p(8).items('center').value}>
      <h1 className={tw.text('2xl').font('700').textColor('slate-900').value}>
        Hello from Next.js
      </h1>
      <div className={tw.p(6).bg('white').rounded('lg').shadow('md').hover(tw.shadow('lg')).value}>
        Hover this card
      </div>
    </div>
  )
}
```

:::caution
In Server Components, always end `tw` chains with `.value` (or `.toString()`). The `tw` chain is a Proxy object -- it coerces to a string automatically in client-side React, but RSC serialization requires a plain string.
:::

## Client Components

For static styles, `tw` works the same with `'use client'`. For dynamic values, use `useStyle()`:

```tsx
'use client'

import { useStyle } from 'typewritingclass-react'
import { p, bg, rounded, dynamic } from 'typewritingclass'

export function Banner({ color }: { color: string }) {
  const props = useStyle(p(6), bg(dynamic(color)), rounded('lg'))
  return <div {...props}>Welcome!</div>
}
```
